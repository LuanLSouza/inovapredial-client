<ion-header>
  <ion-toolbar>
    <ion-title>Detalhes da Tarefa</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="close()">
        ✕
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="task-details">
    
    <ion-card class="main-info-card">
      <ion-card-header>
        <div class="task-header">
          <ion-card-title class="task-title">{{ task.title }}</ion-card-title>
          <ion-badge [color]="getActivityStatusColor(task.activityStatus)" class="status-badge">
            {{ displayActivityStatus(task.activityStatus) }}
          </ion-badge>
        </div>
      </ion-card-header>
      
      <ion-card-content>
        <div class="description-section" *ngIf="task.description">
          <ion-label class="section-label">Descrição</ion-label>
          <p class="description-text">{{ task.description }}</p>
        </div>
      </ion-card-content>
    </ion-card>

    <ion-card class="details-card">
      <ion-card-header>
        <ion-card-title class="card-title">Informações Básicas</ion-card-title>
      </ion-card-header>
      
      <ion-card-content>
        <ion-grid class="details-grid">
          <ion-row>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Título</ion-label>
                <ion-label class="info-value">{{ task.title }}</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Status</ion-label>
                <ion-label class="info-value">{{ displayActivityStatus(task.activityStatus) }}</ion-label>
              </div>
            </ion-col>
          </ion-row>
          
          <ion-row *ngIf="task.reason">
            <ion-col size="12">
              <div class="info-item">
                <ion-label class="info-label">Motivo da Última Alteração</ion-label>
                <ion-label class="info-value">{{ task.reason }}</ion-label>
              </div>
            </ion-col>
          </ion-row>

          <ion-row *ngIf="task.description">
            <ion-col size="12">
              <div class="info-item">
                <ion-label class="info-label">Descrição</ion-label>
                <ion-label class="info-value">{{ task.description }}</ion-label>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-card class="dates-card">
      <ion-card-header>
        <ion-card-title class="card-title">Datas e Tempo</ion-card-title>
      </ion-card-header>
      
      <ion-card-content>
        <ion-grid class="dates-grid">
          <ion-row>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Data de Início</ion-label>
                <ion-label class="info-value">{{ formatDate(task.startDate) }}</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Data de Fim</ion-label>
                <ion-label class="info-value">{{ formatDate(task.endDate) }}</ion-label>
              </div>
            </ion-col>
          </ion-row>
          
          <ion-row>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Tempo Estimado</ion-label>
                <ion-label class="info-value">{{ formatTime(task.estimatedTime) }}</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Tempo Gasto</ion-label>
                <ion-label class="info-value">{{ formatTime(task.timeSpent) }}</ion-label>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-card class="cost-card">
      <ion-card-header>
        <ion-card-title class="card-title">Custo e Responsável</ion-card-title>
      </ion-card-header>
      
      <ion-card-content>
        <ion-grid class="cost-grid">
          <ion-row>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Custo</ion-label>
                <ion-label class="info-value">{{ formatCurrency(task.cost) }}</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" size-md="6">
              <div class="info-item">
                <ion-label class="info-label">Funcionário Responsável</ion-label>
                <ion-label class="info-value">
                  <ion-spinner *ngIf="loadingEmployee" name="crescent" size="small"></ion-spinner>
                  {{ employeeName || '-' }}
                </ion-label>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <!-- Ações -->
    <div class="actions-container">
      <ion-button expand="block" fill="outline" (click)="close()" class="close-button">
        Fechar
      </ion-button>
    </div>

  </div>
</ion-content>
